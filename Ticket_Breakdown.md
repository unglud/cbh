# Ticket Breakdown
We are a staffing company whose primary purpose is to book Agents at Shifts posted by Facilities on our platform. We're working on a new feature which will generate reports for our client Facilities containing info on how many hours each Agent worked in a given quarter by summing up every Shift they worked. Currently, this is how the process works:

- Data is saved in the database in the Facilities, Agents, and Shifts tables
- A function `getShiftsByFacility` is called with the Facility's id, returning all Shifts worked that quarter, including some metadata about the Agent assigned to each
- A function `generateReport` is then called with the list of Shifts. It converts them into a PDF which can be submitted by the Facility for compliance.

## You've been asked to work on a ticket. It reads:

**Currently, the id of each Agent on the reports we generate is their internal database id. We'd like to add the ability for Facilities to save their own custom ids for each Agent they work with and use that id when generating reports for them.**


Based on the information given, break this ticket down into 2-5 individual tickets to perform. Provide as much detail for each ticket as you can, including acceptance criteria, time/effort estimates, and implementation details. Feel free to make informed guesses about any unknown details - you can't guess "wrong".


You will be graded on the level of detail in each ticket, the clarity of the execution plan within and between tickets, and the intelligibility of your language. You don't need to be a native English speaker, but please proof-read your work.

## Your Breakdown Here

# TechSpec
## Assumptions
- 3 tables in Mysql `Facilities`, `Shifts`, and `Agents`, where `Shifts` is a pivot table for `Facilities` and `Agents`
- Report can use custom ids for `Agents`
- `Shifts` table will have a new field `internalId`
- `getShiftsByFacility` function use internalId if present with fallback back to `id`
- new optional field `Internal Id` in Facility UI

## Approach
When the facility books an `Agent` they can specify an internal Id in the interface for it. Later this id can be used in the report. `getShiftsByFacility` will not change the MySQL query and will continue to select all fields from Agents including the new field `internalId` which will programmatically replace `id` in the `generateReport` function.

## Components
- facility database
- facility frontend
- facility backend

## Schema Changes
The schema for the `Shifts` table will change from

```
{
    id: string
    facilityId: number
    agentId: number
}
```

to

```
{
    id: string
    facilityId: number
    agentId: number
    internalId?: number
}
```

## Out of Scope
Facilities would need to remember what `internalId` they used for each particular Agend, becase we don't store this information "easy way". We can derive this from the Shifts table later, therefore it's out of scope.

# Ticket 1 - change schema in the `Shifts` table
## Description
According to TechSpec, we need to adjust the schema in the `Shifts` table to be able to store custom IDs for an Agent.

## AC
- new field `internalId` in the `Shifts` table
- field accepts any string
- field can be null

## Estimations
T-shirt XS

## Tech hint
The schema for the `Shifts` table will change from

```
{
    id: string
    facilityId: number
    agentId: number
}
```

to

```
{
    id: string
    facilityId: number
    agentId: number
    internalId?: string
}
```

# Ticket 2 - add input field Internal ID in Facilities UI
## Description
According to TechSpec, we need to add the ability to Facilities use custom IDs for Agents. For that, we need a new input field in their UI. See the mockup in figma here (imaginary link).

## AC
- new input field Internal ID
- input is optional and accept a string

## What to test
- Form can be submitted with empty Internal ID field
- If submitted with Internal ID it should appear in DB `Shifts` table

## Estimations
T-shirt M

# Ticket 3 - use internalId for a report if available
## Description
According to TechSpec in the report, we need to see the Internal ID specified by Facilities if present. For that, we can use the `internalId` field from the `Shifts` table. The field is optional and can be null, therefore use it only if not empty.

## AC
- Internal ID is present in Report
- Agent ID is present in the report instead if Internal ID is not specified

## Tech hint
The report is generated by `generateReport` and perhaps is the best place to implement the ticket

## Estimations
T-shirt L
